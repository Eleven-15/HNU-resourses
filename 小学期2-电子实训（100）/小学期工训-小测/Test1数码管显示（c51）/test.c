#include <STC15F2K60S2.h>
#define uint unsigned int
#define uchar unsigned char

uint i=0;
//共阴极数码管
uchar duanxuan[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71}; //显示0-F
uchar weixuan[]={0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07};			 //数码管0-7

//查表用
/*
0x3f,0
0x06,1
0x5b,2
0x4f,3
0x66,4
0x6d,5
0x7d,6
0x07,7
0x7f,8
0x6f,9
0x77,a
0x7c,b
0x39,c
0x5e,d
0x79,e
0x71,f
*/

//短横- 为0x40
//全亮0xff
//全灭0x00

uchar letters[26] = {
    0x77, // A
    0x7C, // B
    0x39, // C
    0x5E, // D
    0x79, // E
    0x71, // F
    0x3D, // G
    0x76, // H
    0x30, // I
    0x1E, // J
    0x75, // K
    0x38, // L
    0x15, // M
    0x37, // N
    0x3F, // O
    0x73, // P
    0x6B, // Q
    0x33, // R
    0x6D, // S
    0x31, // T
    0x3E, // U
    0x3E, // V (?U??)
    0x2A, // W
    0x76, // X (?H??)
    0x66, // Y
    0x5B  // Z
};


uchar duanxuan_12HL21[]={0x06,0x5b,0x76,0x38,0x40,0x5b,0x06,0x00};

void Delay(int n)				//延时函数
{
	while(n--);
}

void main()
{
	  P2M0=0xff;					//设置推挽输出
   	P2M1=0x00;
    P0M0=0xff;
    P0M1=0x00;

	while(1)
	{
		for(i=0;i<8;i++)
		{
			P0=0;
			P2=weixuan[i];		//选择数码管的位数
			P0=duanxuan_12HL21[i];	//显示对应的数值
			Delay(600);
		}
	}
}